<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE Map[]>
<Map srs="+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0.0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs +over">

<Parameters>
  <Parameter name="center">6.9653,47.0215,7</Parameter>
  <Parameter name="description"><![CDATA[OSM Bright 2]]></Parameter>
  <Parameter name="format">pbf</Parameter>
  <Parameter name="json"><![CDATA[{"vector_layers":[{"id":"landuse","description":"","fields":{"osm_id":"Number","type":"String","area":"Number","class":"String"}},{"id":"waterway","description":"","fields":{"osm_id":"Number","type":"String","class":"String"}},{"id":"water","description":"","fields":{"osm_id":"Number"}},{"id":"aeroway","description":"","fields":{"osm_id":"Number","type":"String"}},{"id":"building","description":"","fields":{"osm_id":"Number","type":"String","name":"String","area":"Number"}},{"id":"landuse_overlay","description":"","fields":{"osm_id":"Number","type":"String","class":"String"}},{"id":"tunnel","description":"","fields":{"osm_id":"Number","type":"String","bridge":"Number","access":"String","render":"String","layer":"Number","tunnel":"Number","class":"String"}},{"id":"road","description":"","fields":{"osm_id":"Number","type":"String","tunnel":"Number","bridge":"Number","access":"String","render":"String","class":"String"}},{"id":"bridge","description":"","fields":{"osm_id":"Number","type":"String","bridge":"Number","access":"String","render":"String","layer":"Number","tunnel":"Number","class":"String"}},{"id":"admin","description":"","fields":{"osm_id":"Number","admin_level":"Number","disputed":"Number","maritime":"Number"}},{"id":"country_label","description":"","fields":{"osm_id":"Number","name":"String","rank":"Number"}},{"id":"state_label","description":"","fields":{"osm_id":"Number","name":"String","area":"Number"}},{"id":"place_label","description":"","fields":{"osm_id":"Number","name":"String","name_en":"String","type":"String","population":"Number","capital":"String","ldir":"String","localrank":"Number","scalerank":"String"}},{"id":"water_label","description":"","fields":{"osm_id":"Number","name":"String","name_en":"String","area":"Number"}},{"id":"poi_label","description":"","fields":{"osm_id":"Number","name":"String","type":"String","scalerank":"Number","localrank":"Number","maki":"String"}},{"id":"road_label","description":"","fields":{"osm_id":"Number","name":"String","ref":"String","reflen":"Number","len":"Number","class":"String"}},{"id":"waterway_label","description":"","fields":{"osm_id":"Number","name":"String","type":"String","class":"String"}}]}]]></Parameter>
  <Parameter name="maxzoom">14</Parameter>
  <Parameter name="minzoom">7</Parameter>
  <Parameter name="name"><![CDATA[OSM Bright 2]]></Parameter>
</Parameters>


<Layer name="landuse"
  buffer-size="8"
  srs="+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0.0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs +over">
    
    <Datasource>
       <Parameter name="dbname"><![CDATA[osm]]></Parameter>
       <Parameter name="extent"><![CDATA[-20037508.34,-20037508.34,20037508.34,20037508.34]]></Parameter>
       <Parameter name="geometry_field"><![CDATA[geometry]]></Parameter>
       <Parameter name="geometry_table"><![CDATA[]]></Parameter>
       <Parameter name="host"><![CDATA[postgis.osm2vectortiles.org]]></Parameter>
       <Parameter name="key_field"><![CDATA[osm_id]]></Parameter>
       <Parameter name="max_size"><![CDATA[512]]></Parameter>
       <Parameter name="password"><![CDATA[osm]]></Parameter>
       <Parameter name="port"><![CDATA[]]></Parameter>
       <Parameter name="srid"><![CDATA[]]></Parameter>
       <Parameter name="table"><![CDATA[( SELECT * FROM (
    -- landuse_gen0
    SELECT geometry, osm_id, type, area,
    CASE
      WHEN type IN ('cemetery') THEN 'cemetery'
      WHEN type IN ('hospital') THEN 'hospital'
      WHEN type IN ('industrial') THEN 'industrial'
      WHEN type IN ('park', 'common', 'garden', 'playground') THEN 'park'
      WHEN type IN ('parking') THEN 'parking'
      WHEN type IN ('pitch') THEN 'pitch'
      WHEN type IN ('sand') THEN 'sand'
      WHEN type IN ('school', 'university') THEN 'school'
      WHEN type IN ('wood') THEN 'wood'
      WHEN type IN ('forest') THEN 'wood'
      ELSE 'other' END AS class
    FROM osm_landusages_gen0
    WHERE geometry && !bbox!
      AND z(!scale_denominator!) BETWEEN 4 AND 9

    -- landuse_gen1
    UNION ALL
    SELECT geometry, osm_id, type, area,
    CASE
      WHEN type IN ('cemetery') THEN 'cemetery'
      WHEN type IN ('hospital') THEN 'hospital'
      WHEN type IN ('industrial') THEN 'industrial'
      WHEN type IN ('park', 'common', 'garden', 'playground') THEN 'park'
      WHEN type IN ('parking') THEN 'parking'
      WHEN type IN ('pitch') THEN 'pitch'
      WHEN type IN ('sand') THEN 'sand'
      WHEN type IN ('school', 'university') THEN 'school'
      WHEN type IN ('wood') THEN 'wood'
      WHEN type IN ('forest') THEN 'wood'
      ELSE 'other' END AS class
    FROM osm_landusages_gen1
    WHERE geometry && !bbox!
      AND z(!scale_denominator!) BETWEEN 10 AND 12

    -- landuse
    UNION ALL
    SELECT geometry, osm_id, type, area,
    CASE
      WHEN type IN ('cemetery') THEN 'cemetery'
      WHEN type IN ('hospital') THEN 'hospital'
      WHEN type IN ('industrial') THEN 'industrial'
      WHEN type IN ('park', 'common', 'garden', 'playground') THEN 'park'
      WHEN type IN ('parking') THEN 'parking'
      WHEN type IN ('pitch') THEN 'pitch'
      WHEN type IN ('sand') THEN 'sand'
      WHEN type IN ('school', 'university') THEN 'school'
      WHEN type IN ('wood') THEN 'wood'
      WHEN type IN ('forest') THEN 'wood'
      ELSE 'other' END AS class
    FROM osm_landusages
    WHERE geometry && !bbox!
      AND z(!scale_denominator!) > 12
  ) AS QUERY
 ORDER BY area DESC
) AS data]]></Parameter>
       <Parameter name="type"><![CDATA[postgis]]></Parameter>
       <Parameter name="user"><![CDATA[osm]]></Parameter>
    </Datasource>
  </Layer>

<Layer name="waterway"
  buffer-size="8"
  srs="+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0.0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs +over">
    
    <Datasource>
       <Parameter name="dbname"><![CDATA[osm]]></Parameter>
       <Parameter name="extent"><![CDATA[-20037508.34,-20037508.34,20037508.34,20037508.34]]></Parameter>
       <Parameter name="geometry_field"><![CDATA[]]></Parameter>
       <Parameter name="geometry_table"><![CDATA[]]></Parameter>
       <Parameter name="host"><![CDATA[postgis.osm2vectortiles.org]]></Parameter>
       <Parameter name="key_field"><![CDATA[]]></Parameter>
       <Parameter name="max_size"><![CDATA[512]]></Parameter>
       <Parameter name="password"><![CDATA[osm]]></Parameter>
       <Parameter name="port"><![CDATA[5432]]></Parameter>
       <Parameter name="srid"><![CDATA[]]></Parameter>
       <Parameter name="table"><![CDATA[(
         select geometry, osm_id, type, type as class from osm_waterways
           where type in ('river', 'canal')
           and z(!scale_denominator!) >= 8
           and geometry && !bbox!
         union all
         select geometry, osm_id, type, type as class from osm_waterways
           where type in ('stream', 'stream_intermittent')
           and z(!scale_denominator!) >= 13
           and geometry && !bbox!
         union all
         select geometry, osm_id, type, type as class from osm_waterways
           where type in ('drain', 'ditch')
           and z(!scale_denominator!) >= 15
           and geometry && !bbox!
       ) AS data]]></Parameter>
       <Parameter name="type"><![CDATA[postgis]]></Parameter>
       <Parameter name="user"><![CDATA[osm]]></Parameter>
    </Datasource>
  </Layer>

<Layer name="water"
  buffer-size="8"
  srs="+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0.0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs +over">
    
    <Datasource>
       <Parameter name="dbname"><![CDATA[osm]]></Parameter>
       <Parameter name="extent"><![CDATA[-20037508.34,-20037508.34,20037508.34,20037508.34]]></Parameter>
       <Parameter name="geometry_field"><![CDATA[]]></Parameter>
       <Parameter name="geometry_table"><![CDATA[]]></Parameter>
       <Parameter name="host"><![CDATA[postgis.osm2vectortiles.org]]></Parameter>
       <Parameter name="key_field"><![CDATA[]]></Parameter>
       <Parameter name="max_size"><![CDATA[512]]></Parameter>
       <Parameter name="password"><![CDATA[osm]]></Parameter>
       <Parameter name="port"><![CDATA[5432]]></Parameter>
       <Parameter name="srid"><![CDATA[]]></Parameter>
       <Parameter name="table"><![CDATA[(
          select geometry, osm_id from osm_waterareas
            where area >= 5000000000
            and geometry && !bbox!
          union all
          select geometry, osm_id from osm_waterareas
            where area < 5000000000 and area >= 1500000000
            and z(!scale_denominator!) >= 2
            and geometry && !bbox!
          union all
          select geometry, osm_id from osm_waterareas
            where area < 1500000000 and area >= 500000000
            and z(!scale_denominator!) >= 5
            and geometry && !bbox!
          union all
          select geometry, osm_id from osm_waterareas
            where area < 500000000 and area >= 100000000
            and z(!scale_denominator!) >= 6
            and geometry && !bbox!
          union all
          select geometry, osm_id from osm_waterareas
            where area < 100000000 and area >= 40000000
            and z(!scale_denominator!) >= 7
            and geometry && !bbox!
          union all
          select geometry, osm_id from osm_waterareas
            where area < 40000000 and area >= 20000000
            and z(!scale_denominator!) >= 8
            and geometry && !bbox!
          union all
          select geometry, osm_id from osm_waterareas
            where area < 20000000 and area >= 10000000
            and z(!scale_denominator!) >= 9
            and geometry && !bbox!
          union all
          select geometry, osm_id from osm_waterareas
            where area < 10000000 and area >= 5000000
            and z(!scale_denominator!) >= 10
            and geometry && !bbox!
          union all
          select geometry, osm_id from osm_waterareas
            where area < 5000000 and area >= 1000000
            and z(!scale_denominator!) >= 11
            and geometry && !bbox!
          union all
          select geometry, osm_id from osm_waterareas
            where area < 1000000 and area >= 500000
            and z(!scale_denominator!) >= 12
            and geometry && !bbox!
          union all
          select geometry, osm_id from osm_waterareas
            where area < 500000 and area >= 100000
            and z(!scale_denominator!) >= 13
            and geometry && !bbox!
          union all
          select geometry, osm_id from osm_waterareas
            where area < 100000
            and z(!scale_denominator!) >= 14
            and geometry && !bbox!
        ) AS data]]></Parameter>
       <Parameter name="type"><![CDATA[postgis]]></Parameter>
       <Parameter name="user"><![CDATA[osm]]></Parameter>
    </Datasource>
  </Layer>

<Layer name="aeroway"
  buffer-size="8"
  srs="+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0.0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs +over">
    
    <Datasource>
       <Parameter name="dbname"><![CDATA[osm]]></Parameter>
       <Parameter name="extent"><![CDATA[-20037508.34,-20037508.34,20037508.34,20037508.34]]></Parameter>
       <Parameter name="geometry_field"><![CDATA[geometry]]></Parameter>
       <Parameter name="geometry_table"><![CDATA[]]></Parameter>
       <Parameter name="host"><![CDATA[postgis.osm2vectortiles.org]]></Parameter>
       <Parameter name="key_field"><![CDATA[]]></Parameter>
       <Parameter name="max_size"><![CDATA[512]]></Parameter>
       <Parameter name="password"><![CDATA[osm]]></Parameter>
       <Parameter name="port"><![CDATA[]]></Parameter>
       <Parameter name="srid"><![CDATA[]]></Parameter>
       <Parameter name="table"><![CDATA[( SELECT geometry, osm_id, type
  FROM osm_aeroways
  WHERE geometry && !bbox!
    AND z(!scale_denominator!) >= 12
) AS data]]></Parameter>
       <Parameter name="type"><![CDATA[postgis]]></Parameter>
       <Parameter name="user"><![CDATA[osm]]></Parameter>
    </Datasource>
  </Layer>

<Layer name="building"
  buffer-size="8"
  srs="+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0.0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs +over">
    
    <Datasource>
       <Parameter name="dbname"><![CDATA[osm]]></Parameter>
       <Parameter name="extent"><![CDATA[-20037508.34,-20037508.34,20037508.34,20037508.34]]></Parameter>
       <Parameter name="geometry_field"><![CDATA[geometry]]></Parameter>
       <Parameter name="geometry_table"><![CDATA[]]></Parameter>
       <Parameter name="host"><![CDATA[postgis.osm2vectortiles.org]]></Parameter>
       <Parameter name="key_field"><![CDATA[osm_id]]></Parameter>
       <Parameter name="max_size"><![CDATA[512]]></Parameter>
       <Parameter name="password"><![CDATA[osm]]></Parameter>
       <Parameter name="port"><![CDATA[]]></Parameter>
       <Parameter name="srid"><![CDATA[]]></Parameter>
       <Parameter name="table"><![CDATA[( SELECT geometry, osm_id, type, name, area
    FROM osm_buildings
    WHERE geometry && !bbox!
      AND z(!scale_denominator!) >= 12
    ORDER BY ST_YMin(ST_Envelope(geometry)) DESC
) AS data]]></Parameter>
       <Parameter name="type"><![CDATA[postgis]]></Parameter>
       <Parameter name="user"><![CDATA[osm]]></Parameter>
    </Datasource>
  </Layer>

<Layer name="landuse_overlay"
  buffer-size="8"
  srs="+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0.0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs +over">
    
    <Datasource>
       <Parameter name="dbname"><![CDATA[osm]]></Parameter>
       <Parameter name="extent"><![CDATA[-20037508.34,-20037508.34,20037508.34,20037508.34]]></Parameter>
       <Parameter name="geometry_field"><![CDATA[geometry]]></Parameter>
       <Parameter name="geometry_table"><![CDATA[]]></Parameter>
       <Parameter name="host"><![CDATA[postgis.osm2vectortiles.org]]></Parameter>
       <Parameter name="key_field"><![CDATA[osm_id]]></Parameter>
       <Parameter name="max_size"><![CDATA[512]]></Parameter>
       <Parameter name="password"><![CDATA[osm]]></Parameter>
       <Parameter name="port"><![CDATA[]]></Parameter>
       <Parameter name="srid"><![CDATA[]]></Parameter>
       <Parameter name="table"><![CDATA[( SELECT geometry, osm_id, type,
    CASE
      WHEN type IN ('cemetery') THEN 'cemetery'
      WHEN type IN ('hospital') THEN 'hospital'
      WHEN type IN ('industrial') THEN 'industrial'
      WHEN type IN ('park', 'common', 'garden', 'playground') THEN 'park'
      WHEN type IN ('parking') THEN 'parking'
      WHEN type IN ('pitch') THEN 'pitch'
      WHEN type IN ('sand') THEN 'sand'
      WHEN type IN ('school', 'university') THEN 'school'
      WHEN type IN ('wood') THEN 'wood'
      ELSE 'other' END AS class
    FROM osm_landusages
    WHERE geometry && !bbox!
      AND z(!scale_denominator!) > 6
    ORDER BY area DESC
) AS data]]></Parameter>
       <Parameter name="type"><![CDATA[postgis]]></Parameter>
       <Parameter name="user"><![CDATA[osm]]></Parameter>
    </Datasource>
  </Layer>

<Layer name="tunnel"
  buffer-size="8"
  srs="+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0.0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs +over">
    
    <Datasource>
       <Parameter name="dbname"><![CDATA[osm]]></Parameter>
       <Parameter name="extent"><![CDATA[-20037508.34,-20037508.34,20037508.34,20037508.34]]></Parameter>
       <Parameter name="geometry_field"><![CDATA[geometry]]></Parameter>
       <Parameter name="geometry_table"><![CDATA[]]></Parameter>
       <Parameter name="host"><![CDATA[postgis.osm2vectortiles.org]]></Parameter>
       <Parameter name="key_field"><![CDATA[osm_id]]></Parameter>
       <Parameter name="max_size"><![CDATA[512]]></Parameter>
       <Parameter name="password"><![CDATA[osm]]></Parameter>
       <Parameter name="port"><![CDATA[]]></Parameter>
       <Parameter name="srid"><![CDATA[]]></Parameter>
       <Parameter name="table"><![CDATA[( SELECT geometry, osm_id, type, 0 as bridge, access, render, layer, tunnel,
  CASE
    WHEN type IN ('motorway', 'trunk') THEN 'motorway'
    WHEN type IN ('primary', 'secondary', 'tertiary') THEN 'main'
    WHEN type IN ('motorway_link', 'trunk_link', 'primary_link', 'tertiary_link') THEN 'motorway_link'
    WHEN type IN ('secondary_link', 'residential', 'unclassified', 'road') THEN 'street'
    WHEN type IN ('living_street', 'pedestrian') THEN 'street_limited'        
    WHEN type IN ('service', 'track') THEN 'service'
    WHEN type IN ('path', 'cycleway', 'footway', 'steps', 'bridleway') THEN 'path'
    WHEN type IN ('light_rail', 'subway', 'narrow_gauge', 'rail', 'tram') THEN 'major_rail'
    ELSE 'other' END AS class
  FROM (
    SELECT *, '1_outline' AS render FROM osm_roads
    WHERE geometry && !bbox!
      AND tunnel = 1
    UNION ALL
    SELECT *, '2_line' AS render FROM osm_roads
    WHERE geometry && !bbox!
      AND tunnel = 1
    UNION ALL
    SELECT *, '3_inline' AS render FROM osm_roads
    WHERE geometry && !bbox!
      AND tunnel = 1
  ) AS tunnels
  WHERE z(!scale_denominator!) > 10
  ORDER BY layer ASC, render ASC
) AS data]]></Parameter>
       <Parameter name="type"><![CDATA[postgis]]></Parameter>
       <Parameter name="user"><![CDATA[osm]]></Parameter>
    </Datasource>
  </Layer>

<Layer name="road"
  buffer-size="8"
  srs="+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0.0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs +over">
    
    <Datasource>
       <Parameter name="dbname"><![CDATA[osm]]></Parameter>
       <Parameter name="extent"><![CDATA[-20037508.34,-20037508.34,20037508.34,20037508.34]]></Parameter>
       <Parameter name="geometry_field"><![CDATA[geometry]]></Parameter>
       <Parameter name="geometry_table"><![CDATA[]]></Parameter>
       <Parameter name="host"><![CDATA[postgis.osm2vectortiles.org]]></Parameter>
       <Parameter name="key_field"><![CDATA[osm_id]]></Parameter>
       <Parameter name="max_size"><![CDATA[512]]></Parameter>
       <Parameter name="password"><![CDATA[osm]]></Parameter>
       <Parameter name="port"><![CDATA[]]></Parameter>
       <Parameter name="srid"><![CDATA[]]></Parameter>
       <Parameter name="table"><![CDATA[( SELECT * FROM (
    -- roads_low
    SELECT geometry, osm_id, type, tunnel, bridge, access, 'fill' AS render,
      CASE
        WHEN type IN ('motorway', 'trunk') THEN 'motorway'
        WHEN type IN ('primary', 'secondary', 'tertiary') THEN 'main'
        WHEN type IN ('motorway_link', 'trunk_link') THEN 'motorway_link'
        WHEN type IN ('primary_link', 'secondary_link', 'tertiary_link', 'residential', 'unclassified', 'road') THEN 'street'
        WHEN type IN ('living_street', 'pedestrian') THEN 'street_limited'        
        WHEN type IN ('service', 'track') THEN 'service'
        WHEN type IN ('path', 'cycleway', 'footway', 'steps', 'bridleway') THEN 'path'
        WHEN type IN ('light_rail', 'subway', 'narrow_gauge', 'rail', 'tram') THEN 'major_rail'
        ELSE 'other' END AS class
    FROM osm_roads_gen0
    WHERE geometry && !bbox!
      AND z(!scale_denominator!) BETWEEN 5 AND 8

    -- roads_med
    UNION ALL  
    SELECT geometry, osm_id, type, tunnel, bridge, access, 'fill' AS render,
      CASE
        WHEN type IN ('motorway', 'trunk') THEN 'motorway'
        WHEN type IN ('primary', 'secondary', 'tertiary') THEN 'main'
        WHEN type IN ('motorway_link', 'trunk_link') THEN 'motorway_link'
        WHEN type IN ('primary_link', 'secondary_link', 'tertiary_link', 'residential', 'unclassified', 'road') THEN 'street'
        WHEN type IN ('living_street', 'pedestrian') THEN 'street_limited'        
        WHEN type IN ('service', 'track') THEN 'service'
        WHEN type IN ('path', 'cycleway', 'footway', 'steps', 'bridleway') THEN 'path'
        WHEN type IN ('light_rail', 'subway', 'narrow_gauge', 'rail', 'tram') THEN 'major_rail'
        ELSE 'other' END AS class
    FROM osm_roads_gen1
    WHERE geometry && !bbox!
      AND type IN ('motorway', 'trunk', 'primary', 'secondary', 'motorway_link', 'trunk_link')
      AND z(!scale_denominator!) BETWEEN 9 AND 10
  
    -- roads_high
    UNION ALL
    SELECT geometry, osm_id, type, tunnel, bridge, access, 'fill' AS render,
      CASE
        WHEN type IN ('motorway', 'trunk') THEN 'motorway'
        WHEN type IN ('primary', 'secondary', 'tertiary') THEN 'main'
        WHEN type IN ('motorway_link', 'trunk_link') THEN 'motorway_link'
        WHEN type IN ('primary_link', 'secondary_link', 'tertiary_link', 'residential', 'unclassified', 'road') THEN 'street'
        WHEN type IN ('living_street', 'pedestrian') THEN 'street_limited'        
        WHEN type IN ('service', 'track') THEN 'service'
        WHEN type IN ('path', 'cycleway', 'footway', 'steps', 'bridleway') THEN 'path'
        WHEN type IN ('light_rail', 'subway', 'narrow_gauge', 'rail', 'tram') THEN 'major_rail'
        ELSE 'other' END AS class
    FROM osm_roads
    WHERE geometry && !bbox!
      AND bridge = 0
      AND tunnel = 0
      AND z(!scale_denominator!) > 10
  ) AS QUERY
) AS data]]></Parameter>
       <Parameter name="type"><![CDATA[postgis]]></Parameter>
       <Parameter name="user"><![CDATA[osm]]></Parameter>
    </Datasource>
  </Layer>

<Layer name="bridge"
  buffer-size="8"
  srs="+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0.0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs +over">
    
    <Datasource>
       <Parameter name="dbname"><![CDATA[osm]]></Parameter>
       <Parameter name="extent"><![CDATA[-20037508.34,-20037508.34,20037508.34,20037508.34]]></Parameter>
       <Parameter name="geometry_field"><![CDATA[geometry]]></Parameter>
       <Parameter name="geometry_table"><![CDATA[]]></Parameter>
       <Parameter name="host"><![CDATA[postgis.osm2vectortiles.org]]></Parameter>
       <Parameter name="key_field"><![CDATA[osm_id]]></Parameter>
       <Parameter name="max_size"><![CDATA[512]]></Parameter>
       <Parameter name="password"><![CDATA[osm]]></Parameter>
       <Parameter name="port"><![CDATA[]]></Parameter>
       <Parameter name="srid"><![CDATA[]]></Parameter>
       <Parameter name="table"><![CDATA[( SELECT geometry, osm_id, type, bridge, access, render, layer, 0 as tunnel,
  CASE
    WHEN type IN ('motorway', 'trunk') THEN 'motorway'
    WHEN type IN ('primary', 'secondary', 'tertiary') THEN 'main'
    WHEN type IN ('motorway_link', 'trunk_link', 'primary_link', 'tertiary_link') THEN 'motorway_link'
    WHEN type IN ('secondary_link', 'residential', 'unclassified', 'road') THEN 'street'
    WHEN type IN ('living_street', 'pedestrian') THEN 'street_limited'        
    WHEN type IN ('service', 'track') THEN 'service'
    WHEN type IN ('path', 'cycleway', 'footway', 'steps', 'bridleway') THEN 'path'
    WHEN type IN ('light_rail', 'subway', 'narrow_gauge', 'rail', 'tram') THEN 'major_rail'
    ELSE 'other' END AS class
  FROM (
    SELECT *, '1_outline' AS render FROM osm_roads
    WHERE geometry && !bbox!
      AND bridge = 1
    UNION ALL
    SELECT *, '2_line' AS render FROM osm_roads
    WHERE geometry && !bbox!
      AND bridge = 1
    UNION ALL
    SELECT *, '3_inline' AS render FROM osm_roads
    WHERE geometry && !bbox!
      AND bridge = 1
  ) as bridges
  WHERE z(!scale_denominator!) > 10
  ORDER BY layer ASC, render ASC
) AS data]]></Parameter>
       <Parameter name="type"><![CDATA[postgis]]></Parameter>
       <Parameter name="user"><![CDATA[osm]]></Parameter>
    </Datasource>
  </Layer>

<Layer name="admin"
  buffer-size="8"
  srs="+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0.0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs +over">
    
    <Datasource>
       <Parameter name="dbname"><![CDATA[osm]]></Parameter>
       <Parameter name="extent"><![CDATA[-20037508.34,-20037508.34,20037508.34,20037508.34]]></Parameter>
       <Parameter name="geometry_field"><![CDATA[]]></Parameter>
       <Parameter name="geometry_table"><![CDATA[]]></Parameter>
       <Parameter name="host"><![CDATA[postgis.osm2vectortiles.org]]></Parameter>
       <Parameter name="key_field"><![CDATA[]]></Parameter>
       <Parameter name="max_size"><![CDATA[512]]></Parameter>
       <Parameter name="password"><![CDATA[osm]]></Parameter>
       <Parameter name="port"><![CDATA[5432]]></Parameter>
       <Parameter name="srid"><![CDATA[]]></Parameter>
       <Parameter name="table"><![CDATA[(
          /* TODO calculate maritime */
          select geometry, osm_id, admin_level, 0 as disputed, 0 as maritime
            from osm_admin
            where admin_level = 2
            and geometry && !bbox!
          union all
          select geometry, osm_id, admin_level, 0 as disputed, 0 as maritime
            from osm_admin
            where admin_level = 4
            and z(!scale_denominator!) >= 5
            and geometry && !bbox!
        ) AS data]]></Parameter>
       <Parameter name="type"><![CDATA[postgis]]></Parameter>
       <Parameter name="user"><![CDATA[osm]]></Parameter>
    </Datasource>
  </Layer>

<Layer name="country_label"
  buffer-size="64"
  srs="+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0.0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs +over">
    
    <Datasource>
       <Parameter name="dbname"><![CDATA[osm]]></Parameter>
       <Parameter name="extent"><![CDATA[-20037508.34,-20037508.34,20037508.34,20037508.34]]></Parameter>
       <Parameter name="geometry_field"><![CDATA[geometry]]></Parameter>
       <Parameter name="geometry_table"><![CDATA[]]></Parameter>
       <Parameter name="host"><![CDATA[postgis.osm2vectortiles.org]]></Parameter>
       <Parameter name="key_field"><![CDATA[]]></Parameter>
       <Parameter name="max_size"><![CDATA[512]]></Parameter>
       <Parameter name="password"><![CDATA[osm]]></Parameter>
       <Parameter name="port"><![CDATA[]]></Parameter>
       <Parameter name="srid"><![CDATA[]]></Parameter>
       <Parameter name="table"><![CDATA[(
  /* TODO get real name_en/name_de/name_es */
  /* TODO improve ranking */
  select geometry, osm_id, name, 1 as rank from osm_places
    where type = 'country' and
    population >= 250000000
    and geometry && !bbox!
  union all
  select geometry, osm_id, name, 2 as rank from osm_places
    where type = 'country' and
    population >= 100000000 and population < 250000000
    and geometry && !bbox!
  union all
  select geometry, osm_id, name, 3 as rank from osm_places
    where type = 'country' and
    population >= 50000000 and population < 100000000
    and geometry && !bbox!
  union all
  select geometry, osm_id, name, 4 as rank from osm_places
    where type = 'country' and
    population >= 25000000 and population < 50000000
    and geometry && !bbox!
  union all
  select geometry, osm_id, name, 5 as rank from osm_places
    where type = 'country' and
    population >= 10000000 and population < 25000000
    and geometry && !bbox!
  union all
  select geometry, osm_id, name, 6 as rank from osm_places
    where type = 'country' and
    population < 10000000
    and geometry && !bbox!
) AS data]]></Parameter>
       <Parameter name="type"><![CDATA[postgis]]></Parameter>
       <Parameter name="user"><![CDATA[osm]]></Parameter>
    </Datasource>
  </Layer>

<Layer name="state_label"
  buffer-size="64"
  srs="+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0.0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs +over">
    
    <Datasource>
       <Parameter name="dbname"><![CDATA[osm]]></Parameter>
       <Parameter name="extent"><![CDATA[-20037508.34,-20037508.34,20037508.34,20037508.34]]></Parameter>
       <Parameter name="geometry_field"><![CDATA[geometry]]></Parameter>
       <Parameter name="geometry_table"><![CDATA[]]></Parameter>
       <Parameter name="host"><![CDATA[postgis.osm2vectortiles.org]]></Parameter>
       <Parameter name="key_field"><![CDATA[]]></Parameter>
       <Parameter name="max_size"><![CDATA[512]]></Parameter>
       <Parameter name="password"><![CDATA[osm]]></Parameter>
       <Parameter name="port"><![CDATA[]]></Parameter>
       <Parameter name="srid"><![CDATA[]]></Parameter>
       <Parameter name="table"><![CDATA[(
  /* TODO get real name_en/name_de/name_es */
  /* TODO get real area */
  select geometry, osm_id, name, 0 as area from osm_places
    where type = 'state'
    and geometry && !bbox!
) AS data]]></Parameter>
       <Parameter name="type"><![CDATA[postgis]]></Parameter>
       <Parameter name="user"><![CDATA[osm]]></Parameter>
    </Datasource>
  </Layer>

<Layer name="place_label"
  buffer-size="64"
  srs="+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0.0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs +over">
    
    <Datasource>
       <Parameter name="dbname"><![CDATA[osm]]></Parameter>
       <Parameter name="extent"><![CDATA[-20037508.34,-20037508.34,20037508.34,20037508.34]]></Parameter>
       <Parameter name="geometry_field"><![CDATA[geometry]]></Parameter>
       <Parameter name="geometry_table"><![CDATA[]]></Parameter>
       <Parameter name="host"><![CDATA[postgis.osm2vectortiles.org]]></Parameter>
       <Parameter name="key_field"><![CDATA[]]></Parameter>
       <Parameter name="max_size"><![CDATA[512]]></Parameter>
       <Parameter name="password"><![CDATA[osm]]></Parameter>
       <Parameter name="port"><![CDATA[]]></Parameter>
       <Parameter name="srid"><![CDATA[]]></Parameter>
       <Parameter name="table"><![CDATA[/* TODO get real name_en/name_de/name_es */
/* TODO calculate real ranks and ldir */
( SELECT * FROM (
    SELECT DISTINCT ON(LabelGrid(geometry, 64)) *
    FROM (
      select geometry, osm_id, name, name as name_en, type, population,
        null as capital, 'SE' as ldir, 1 as localrank, null as scalerank
        from osm_places
        where type = 'city'
        and geometry && !bbox!
      union all
      select geometry, osm_id, name, name as name_en, type, population,
        null as capital, 'SE' as ldir, 1 as localrank, null as scalerank
        from osm_places
        where type = 'town' and z(!scale_denominator!) >= 7
        and geometry && !bbox!
      union all
      select geometry, osm_id, name, name as name_en, type, population,
        null as capital, 'SE' as ldir, 1 as localrank, null as scalerank
        from osm_places
        where type in ('hamlet', 'suburb','neighbourhood') and z(!scale_denominator!) >= 10
        and geometry && !bbox!
    ) AS places
    ORDER BY LabelGrid(geometry, 64), population DESC NULLS LAST, osm_id
  ) AS ordered
  ORDER BY population DESC NULLS LAST, osm_id
) AS data]]></Parameter>
       <Parameter name="type"><![CDATA[postgis]]></Parameter>
       <Parameter name="user"><![CDATA[osm]]></Parameter>
    </Datasource>
  </Layer>

<Layer name="water_label"
  buffer-size="8"
  srs="+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0.0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs +over">
    
    <Datasource>
       <Parameter name="dbname"><![CDATA[osm]]></Parameter>
       <Parameter name="extent"><![CDATA[-20037508.34,-20037508.34,20037508.34,20037508.34]]></Parameter>
       <Parameter name="geometry_field"><![CDATA[]]></Parameter>
       <Parameter name="geometry_table"><![CDATA[]]></Parameter>
       <Parameter name="host"><![CDATA[postgis.osm2vectortiles.org]]></Parameter>
       <Parameter name="key_field"><![CDATA[]]></Parameter>
       <Parameter name="max_size"><![CDATA[512]]></Parameter>
       <Parameter name="password"><![CDATA[osm]]></Parameter>
       <Parameter name="port"><![CDATA[5432]]></Parameter>
       <Parameter name="srid"><![CDATA[]]></Parameter>
       <Parameter name="table"><![CDATA[(
        select ST_PointOnSurface(geometry) as geometry, osm_id,
          name, name as name_en, area from osm_waterareas
          where area >= 5000000000
          and z(!scale_denominator!) >= 5
          and geometry && !bbox!
        union all
        select ST_PointOnSurface(geometry) as geometry, osm_id,
          name, name as name_en, area from osm_waterareas
          where area < 5000000000 and area >= 1500000000
          and z(!scale_denominator!) >= 5
          and geometry && !bbox!
        union all
        select ST_PointOnSurface(geometry) as geometry, osm_id,
          name, name as name_en, area from osm_waterareas
          where area < 1500000000 and area >= 500000000
          and z(!scale_denominator!) >= 8
          and geometry && !bbox!
        union all
        select ST_PointOnSurface(geometry) as geometry, osm_id,
          name, name as name_en, area from osm_waterareas
          where area < 500000000 and area >= 100000000
          and z(!scale_denominator!) >= 9
          and geometry && !bbox!
        union all
        select ST_PointOnSurface(geometry) as geometry, osm_id,
          name, name as name_en, area from osm_waterareas
          where area < 100000000 and area >= 40000000
          and z(!scale_denominator!) >= 10
          and geometry && !bbox!
        union all
        select ST_PointOnSurface(geometry) as geometry, osm_id,
          name, name as name_en, area from osm_waterareas
          where area < 40000000 and area >= 20000000
          and z(!scale_denominator!) >= 11
          and geometry && !bbox!
        union all
        select ST_PointOnSurface(geometry) as geometry, osm_id,
          name, name as name_en, area from osm_waterareas
          where area < 20000000 and area >= 10000000
          and z(!scale_denominator!) >= 12
          and geometry && !bbox!
        union all
        select ST_PointOnSurface(geometry) as geometry, osm_id,
          name, name as name_en, area from osm_waterareas
          where area < 10000000 and area >= 5000000
          and z(!scale_denominator!) >= 13
          and geometry && !bbox!
        union all
        select ST_PointOnSurface(geometry) as geometry, osm_id,
          name, name as name_en, area from osm_waterareas
          where area < 5000000 and area >= 1000000
          and z(!scale_denominator!) >= 14
          and geometry && !bbox!
        union all
        select ST_PointOnSurface(geometry) as geometry, osm_id,
          name, name as name_en, area from osm_waterareas
          where area < 1000000 and area >= 500000
          and z(!scale_denominator!) >= 15
          and geometry && !bbox!
        union all
        select ST_PointOnSurface(geometry) as geometry, osm_id,
          name, name as name_en, area from osm_waterareas
          where area < 500000 and area >= 100000
          and z(!scale_denominator!) >= 16
          and geometry && !bbox!
        union all
        select ST_PointOnSurface(geometry) as geometry, osm_id,
          name, name as name_en, area from osm_waterareas
          where area < 100000
          and z(!scale_denominator!) >= 17
          and geometry && !bbox!
      ) AS data]]></Parameter>
       <Parameter name="type"><![CDATA[postgis]]></Parameter>
       <Parameter name="user"><![CDATA[osm]]></Parameter>
    </Datasource>
  </Layer>

<Layer name="poi_label"
  buffer-size="64"
  srs="+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0.0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs +over">
    
    <Datasource>
       <Parameter name="dbname"><![CDATA[osm]]></Parameter>
       <Parameter name="extent"><![CDATA[-20037508.34,-20037508.34,20037508.34,20037508.34]]></Parameter>
       <Parameter name="geometry_field"><![CDATA[geometry]]></Parameter>
       <Parameter name="geometry_table"><![CDATA[]]></Parameter>
       <Parameter name="host"><![CDATA[postgis.osm2vectortiles.org]]></Parameter>
       <Parameter name="key_field"><![CDATA[]]></Parameter>
       <Parameter name="max_size"><![CDATA[512]]></Parameter>
       <Parameter name="password"><![CDATA[osm]]></Parameter>
       <Parameter name="port"><![CDATA[]]></Parameter>
       <Parameter name="srid"><![CDATA[]]></Parameter>
       <Parameter name="table"><![CDATA[(
  /* TODO calculate real ranks */
  /* TODO improve assigning maki icon */
  select geometry, osm_id,
    name, type, 3 as scalerank, 1 as localrank,
    (CASE WHEN replace(type, '_', '-') in ('airfield','london-underground','airport','marker','alcohol-shop','marker-stroked','america-football','minefield','art-gallery','mobilephone','bakery','monument','bank','museum','bar','music','baseball','oil-well','basketball','park2','beer','park','bicycle','parking','building','parking-garage','bus','pharmacy','cafe','pitch','camera','place-of-worship','campsite','playground','car','police','cemetery','polling-place','chemist','post','cinema','prison','circle','rail','circle-stroked','rail-above','city','rail-light','clothing-store','rail-metro','college','rail-underground','commercial','religious-christian','cricket','religious-jewish','cross','religious-muslim','dam','restaurant','danger','roadblock','disability','rocket','dog-park','school','embassy','scooter','emergency-telephone','shop','entrance','skiing','farm','slaughterhouse','fast-food','soccer','ferry','square','fire-station','square-stroked','fuel','star','garden','star-stroked','gift','suitcase','golf','swimming','grocery','telephone','hairdresser','tennis','harbor','theatre','heart','toilets','heliport','town','hospital','town-hall','ice-cream','triangle','industrial','triangle-stroked','land-use','village','laundry','warehouse','library','waste-basket','lighthouse','water','lodging','wetland','logging','zoo')
    THEN replace(type, '_', '-')
    ELSE null
    END) as maki
    from osm_amenities
    where z(!scale_denominator!) >= 16
    and geometry && !bbox!
) AS data]]></Parameter>
       <Parameter name="type"><![CDATA[postgis]]></Parameter>
       <Parameter name="user"><![CDATA[osm]]></Parameter>
    </Datasource>
  </Layer>

<Layer name="road_label"
  buffer-size="64"
  srs="+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0.0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs +over">
    
    <Datasource>
       <Parameter name="dbname"><![CDATA[osm]]></Parameter>
       <Parameter name="extent"><![CDATA[-20037508.34,-20037508.34,20037508.34,20037508.34]]></Parameter>
       <Parameter name="geometry_field"><![CDATA[geometry]]></Parameter>
       <Parameter name="geometry_table"><![CDATA[]]></Parameter>
       <Parameter name="host"><![CDATA[postgis.osm2vectortiles.org]]></Parameter>
       <Parameter name="key_field"><![CDATA[]]></Parameter>
       <Parameter name="max_size"><![CDATA[512]]></Parameter>
       <Parameter name="password"><![CDATA[osm]]></Parameter>
       <Parameter name="port"><![CDATA[]]></Parameter>
       <Parameter name="srid"><![CDATA[]]></Parameter>
       <Parameter name="table"><![CDATA[(
  select geometry, osm_id,
    name, ref, char_length(ref) as reflen,
    round(MercLength(geometry)) as len, 'motorway' as class
    from osm_roads
    where bridge = 0 and tunnel = 0 and type in ('motorway')
    and z(!scale_denominator!) >= 5
    and linelabel(z(!scale_denominator!), name, geometry)
    and geometry && !bbox!
  union all
  select geometry, osm_id,
    name, ref, char_length(ref) as reflen,
    round(MercLength(geometry)) as len, 'motorway_link' as class
    from osm_roads
    where bridge = 0 and tunnel = 0 and type in ('motorway_link')
    and z(!scale_denominator!) >= 13
    and linelabel(z(!scale_denominator!), name, geometry)
    and geometry && !bbox!
  union all
  select geometry, osm_id,
    name, ref, char_length(ref) as reflen,
    round(MercLength(geometry)) as len, 'main' as class
    from osm_roads
    where bridge = 0 and tunnel = 0 and type in ('primary',
    'primary_link', 'trunk', 'trunk_link')
    and z(!scale_denominator!) >= 5
    and linelabel(z(!scale_denominator!), name, geometry)
    and geometry && !bbox!
  union all
  select geometry, osm_id,
    name, ref, char_length(ref) as reflen,
    round(MercLength(geometry)) as len, 'main' as class
    from osm_roads
    where bridge = 0 and tunnel = 0 and type in ('secondary',
    'secondary_link')
    and z(!scale_denominator!) >= 9
    and linelabel(z(!scale_denominator!), name, geometry)
    and geometry && !bbox!
  union all
  select geometry, osm_id,
    name, ref, char_length(ref) as reflen,
    round(MercLength(geometry)) as len, 'main' as class
    from osm_roads
    where bridge = 0 and tunnel = 0 and type in ('tertiary',
    'tertiary_link')
    and z(!scale_denominator!) >= 12
    and linelabel(z(!scale_denominator!), name, geometry)
    and geometry && !bbox!
  union all
  select geometry, osm_id,
    name, ref, char_length(ref) as reflen,
    round(MercLength(geometry)) as len, 'street' as class
    from osm_roads
    where bridge = 0 and tunnel = 0 and type in ('residential',
    'unclassified', 'living_street')
    and z(!scale_denominator!) >= 12
    and linelabel(z(!scale_denominator!), name, geometry)
    and geometry && !bbox!
  union all
  select geometry, osm_id,
    name, ref, char_length(ref) as reflen,
    round(MercLength(geometry)) as len, 'street_limited' as class
    from osm_roads
    where bridge = 0 and tunnel = 0 and (type in ('pedestrian',
    'construction') or access = 'private')
    and z(!scale_denominator!) >= 12
    and linelabel(z(!scale_denominator!), name, geometry)
    and geometry && !bbox!
  union all
  select geometry, osm_id,
    name, ref, char_length(ref) as reflen,
    round(MercLength(geometry)) as len, 'service' as class
    from osm_roads
    where bridge = 0 and tunnel = 0 and type in ('service',
    'track')
    and z(!scale_denominator!) >= 15
    and linelabel(z(!scale_denominator!), name, geometry)
    and geometry && !bbox!
  union all
  select geometry, osm_id,
    name, ref, char_length(ref) as reflen,
    round(MercLength(geometry)) as len, 'driveway' as class
    from osm_roads
    where bridge = 0 and tunnel = 0 and type in ('driveway')
    and z(!scale_denominator!) >= 15
    and linelabel(z(!scale_denominator!), name, geometry)
    and geometry && !bbox!
  union all
  select geometry, osm_id,
    name, ref, char_length(ref) as reflen,
    round(MercLength(geometry)) as len, 'path' as class
    from osm_roads
    where bridge = 0 and tunnel = 0 and type in ('path',
    'cycleway', 'ski', 'steps', 'bridleway')
    and z(!scale_denominator!) >= 15
    and linelabel(z(!scale_denominator!), name, geometry)
    and geometry && !bbox!
) AS data]]></Parameter>
       <Parameter name="type"><![CDATA[postgis]]></Parameter>
       <Parameter name="user"><![CDATA[osm]]></Parameter>
    </Datasource>
  </Layer>

<Layer name="waterway_label"
  buffer-size="64"
  srs="+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0.0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs +over">
    
    <Datasource>
       <Parameter name="dbname"><![CDATA[osm]]></Parameter>
       <Parameter name="extent"><![CDATA[-20037508.34,-20037508.34,20037508.34,20037508.34]]></Parameter>
       <Parameter name="geometry_field"><![CDATA[geometry]]></Parameter>
       <Parameter name="geometry_table"><![CDATA[]]></Parameter>
       <Parameter name="host"><![CDATA[postgis.osm2vectortiles.org]]></Parameter>
       <Parameter name="key_field"><![CDATA[]]></Parameter>
       <Parameter name="max_size"><![CDATA[512]]></Parameter>
       <Parameter name="password"><![CDATA[osm]]></Parameter>
       <Parameter name="port"><![CDATA[]]></Parameter>
       <Parameter name="srid"><![CDATA[]]></Parameter>
       <Parameter name="table"><![CDATA[(
  select geometry, osm_id,
    name, type, type as class from osm_waterways
    where type in ('river', 'canal')
    and z(!scale_denominator!) >= 8
    and linelabel(z(!scale_denominator!), name, geometry)
    and geometry && !bbox!
  union all
  select geometry, osm_id,
    name, type, type as class from osm_waterways
    where type in ('stream', 'stream_intermittent')
    and z(!scale_denominator!) >= 13
    and linelabel(z(!scale_denominator!), name, geometry)
    and geometry && !bbox!
  union all
  select geometry, osm_id,
    name, type, type as class from osm_waterways
    where type in ('drain', 'ditch')
    and z(!scale_denominator!) >= 15
    and linelabel(z(!scale_denominator!), name, geometry)
    and geometry && !bbox!
) AS data]]></Parameter>
       <Parameter name="type"><![CDATA[postgis]]></Parameter>
       <Parameter name="user"><![CDATA[osm]]></Parameter>
    </Datasource>
  </Layer>

</Map>